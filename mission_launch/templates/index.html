{% extends "base.html" %}
{% block title %}Mission Control{% endblock %}
{% block body_class %}dashboard{% endblock %}

{% block content %}
  <div class="wrapper">
    <div class="sidebar">
      <div class="status-item"><strong>Status</strong><br>{% if status.armed %}<span style="color:lime">ARMED</span>{% else %}<span style="color:red">DISARMED</span>{% endif %}</div>
      <div class="status-item"><strong>Altitude</strong><br>{{ status.altitude }} m</div>
      <div class="status-item"><strong>Speed</strong><br>{{ status.speed }} m/s</div>
      <div class="status-item"><strong>Camera</strong><br>{% if status.camera_on %}ON{% else %}OFF{% endif %}</div>
    </div>

    <div class="content">
      <div class="video">
      {% if status.camera_on %}
        <img src="/video_feed" width="640" height="480">
      {% else %}
        <div class="video-placeholder">
          <p>[ VIDEO FEED OFF ]</p>
        </div>
      {% endif %}
    </div>

      {% if status.countdown %}
        <div class="countdown">T-minus {{ status.countdown }}</div>
      {% elif status.launched %}
        <div class="countdown">üöÄ LAUNCHED!</div>
      {% elif status.aborted %}
        <div class="countdown">‚ùå ABORTED</div>
      {% endif %}

      <div class="controls">
        <form action="/start_recorder"><button class="nasa-button" {% if status.recording %}disabled{% endif %}>Start Recorder</button></form>
        <form action="/stop_recorder"><button class="nasa-button" {% if not status.recording %}disabled{% endif %}>Stop Recorder</button></form>
        <form action="/toggle_safety"><button class="nasa-button">Toggle Safety</button></form>
        <form action="/launch"><button class="nasa-button" {% if not status.armed %}disabled{% endif %}>Launch</button></form>
        <form action="/abort"><button class="nasa-button">Abort</button></form>
        <form action="/start_camera"><button class="nasa-button">Start Camera</button></form>
        <form action="/stop_camera"><button class="nasa-button">Stop Camera</button></form>
      </div>
    </div>
  </div>

  <footer class="footer">
    <p>Rocket Control Dashboard</p>
    <p>¬© 2025 Ray's Rocket Team</p>
  </footer>
{% endblock %}